<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Redirigiendo...</title>
    <style>
        body { background-color: #1a1a1a; color: #e0e0e0; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .container { text-align: center; }
        .spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top: 4px solid #00a1ff; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <div class="spinner"></div>
        <p>Autenticando, por favor espera...</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Extraer el token de la URL
            const params = new URLSearchParams(window.location.search);
            const token = params.get('token');
            const error = params.get('error');

            if (window.opener) {
                if (token) {
                    // Enviar el token a la ventana principal que abrió el pop-up
                    window.opener.postMessage({ type: 'social-login-success', token: token }, window.location.origin);
                } else if (error) {
                    // Enviar un mensaje de error si algo falló
                    window.opener.postMessage({ type: 'social-login-error', message: error }, window.location.origin);
                }
            }
            
            // Cerrar la ventana pop-up
            window.close();
        });
    </script>
</body>
</html>
